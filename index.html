<!DOCTYPE html>
<html id = "rootel" class = "non-invis">
<head>
<meta charset="utf-8">
<title>Binary Screensaver Fullscreen</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    background: black;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-family: monospace;
  }
  #startBtn {
    padding: 20px 40px;
    font-size: 24px;
    cursor: pointer;
    background: #00ff00;
    border: none;
    border-radius: 8px;
  }
  canvas {
    display: none; /* hide until started */
  }
  .nc {
    cursor: none;
  }
  .non-invis {
    cursor: auto;
  }
</style>
</head>
<body>
<button id="startBtn">Start Fullscreen</button>
<canvas id="screen"></canvas>

<script>
const canvas = document.getElementById('screen');
const ctx = canvas.getContext('2d');
const startBtn = document.getElementById('startBtn');
const rootel = document.getElementById("rootel");
  
let width, height;
let fontSize = 16;
let lines;
const columns = 275;
let buffer = [];
let lastUpdate = 0;
const interval = 1000 / 10; // ~10 FPS

function initBuffer() {
  buffer = Array(lines).fill('').map(() => Array(columns).fill(' '));
}

function resize() {
  width = canvas.width = window.innerWidth;
  height = canvas.height = window.innerHeight;
  ctx.font = `${fontSize}px monospace`;
  ctx.fillStyle = '#00ff00';
  ctx.textBaseline = 'top';
  lines = Math.ceil(height / fontSize);
  initBuffer();
}

function draw() {
  ctx.clearRect(0, 0, width, height);
  for (let y = 0; y < lines; y++) {
    const xOffset = Math.floor(Math.random() * 3); // slight shift for burn-in
    ctx.fillText(buffer[y].join(''), xOffset, y * fontSize);
  }
}

function shiftBuffer() {
  buffer.shift();
  const newLine = Array(columns).fill(0).map(() => Math.random() < 0.5 ? '0' : '1');
  buffer.push(newLine);
}

function loop(timestamp) {
  if (timestamp - lastUpdate > interval) {
    shiftBuffer();
    draw();
    lastUpdate = timestamp;
  }
  requestAnimationFrame(loop);
}

function startScreensaver() {
  // Hide the button
  startBtn.style.display = 'none';
  canvas.style.display = 'block';
  rootel.removeAttribute("class");
  rootel.setAttribute("class", "nc");
  // Resize canvas
  resize();
  window.addEventListener('resize', resize);

  // Request fullscreen
  if (canvas.requestFullscreen) {
    canvas.requestFullscreen();
  } else if (canvas.webkitRequestFullscreen) {
    canvas.webkitRequestFullscreen();
  } else if (canvas.msRequestFullscreen) {
    canvas.msRequestFullscreen();
  }

  // Start animation loop
  requestAnimationFrame(loop);
}

// Start when button is clicked
startBtn.addEventListener('click', startScreensaver);
</script>
</body>
</html>
